# Sensor CSV Processing + Analysis

## Data processing

`[parse.py](http://parse.py)` will read and parse a folder of sensor CSV files generated by the SWM web interface ([water.symmons.com](http://water.symmons.com)) into a series of per-sensor JSON files.

Each CSV file is assumed to be comma delimited, contain the timestamp in the left column, and sensor data in any rightward columns.

All data found for a given sensor is merged and correlated. This allows for sensor data to be split across any number of files, useful for large datasets. 

A JSON file is generated for each sensor, with a name matching that of the sensor (e.g. "01 Riser Supply" â†’ "01 Riser Supply.json"). Data is given in the form of a key-value pair, with the key being time in seconds since the first detected sensor reading, and the value being the sensor reading (in Fahrenheit) at said time. The timestamp of the first sensor reading for each sensor is given in the "startTime" field.

Example structure:

    {
    	"startTime": "2019-04-22 00:01:05",
    	"data": {
    			"37": 95.5,
    			"216": 95.4,
    			"577": 95.2,
    			"937": 94.9
    		}
    }
    		

Example usage:

`./parse.py csv_src_folder json_dest_folder`

Data analysis:

`[stats.py](http://stats.py)` will load from two datasets of JSON files generated by `[parse.py](http://parse.py)` . For each sensor that exists in both datasets (assumed to be older and newer data, in the case of the script's [original use case](https://www.notion.so/symmons/Dev-Prod-Temp-Delta-5847f48e4fd24cb984619f772996ae23)), the mean and standard deviation of the sensor in both sets will be taken and compared. A table containing per-sensor old and new means, standard deviations, and percentage change of the mean will be generated. Additionally, a chart showing per-sensor means and standard deviations will be generated, as well as a chart showing per-sensor percent change in the mean. 

Example usage:

`./stats.py dataset_1_json_dir dataset_2_json_dir`


Example outputs:

![](https://i.imgur.com/qM5kyn6.png)

![](https://i.imgur.com/NctZ7qk.png)

![](https://i.imgur.com/n5c6Ztj.png)

